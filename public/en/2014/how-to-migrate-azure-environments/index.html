<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="This article demonstrates how to migrate (copy) one Azure database to another and any associated files.  For example, you may want to copy your production database to your test (preproduction) environ">
<meta property="og:type" content="article">
<meta property="og:title" content="How to migrate Azure environments (copy databases &amp; storage accounts)">
<meta property="og:url" content="https://richardcooke.info/en/2014/how-to-migrate-azure-environments/index.html">
<meta property="og:site_name" content="Richard JE Cooke">
<meta property="og:description" content="This article demonstrates how to migrate (copy) one Azure database to another and any associated files.  For example, you may want to copy your production database to your test (preproduction) environ">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://richardcooke.info/Migrate1.png">
<meta property="og:image" content="https://richardcooke.info/Migrate2.png">
<meta property="og:image" content="https://richardcooke.info/Migrate3.png">
<meta property="og:image" content="https://richardcooke.info/Migrate4.png">
<meta property="og:image" content="https://richardcooke.info/Migrate5.png">
<meta property="article:published_time" content="2014-10-27T09:58:55.000Z">
<meta property="article:modified_time" content="2022-05-27T17:09:22.099Z">
<meta property="article:author" content="Richard JE Cooke">
<meta property="article:tag" content="azure">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://richardcooke.info/Migrate1.png">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>How to migrate Azure environments (copy databases &amp; storage accounts)</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 6.2.0"><link rel="alternate" href="/atom.xml" title="Richard JE Cooke" type="application/atom+xml">
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">home</a></li><!--
     --><!--
       --><li><a href="/archives/">articles</a></li><!--
     --><!--
       --><li><a href="/music">music</a></li><!--
     --><!--
       --><li><a href="/apps">apps</a></li><!--
     --><!--
       --><li><a href="/cv">cv</a></li><!--
     --><!--
       --><li><a href="/atom.xml">rss feed</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/en/2014/two-quick-tips-to-reduce-azure-cloud-service-costs/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/en/2014/settings-in-azure/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://richardcooke.info/en/2014/how-to-migrate-azure-environments/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://richardcooke.info/en/2014/how-to-migrate-azure-environments/&text=How to migrate Azure environments (copy databases &amp; storage accounts)"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://richardcooke.info/en/2014/how-to-migrate-azure-environments/&title=How to migrate Azure environments (copy databases &amp; storage accounts)"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://richardcooke.info/en/2014/how-to-migrate-azure-environments/&is_video=false&description=How to migrate Azure environments (copy databases &amp; storage accounts)"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=How to migrate Azure environments (copy databases &amp; storage accounts)&body=Check out this article: https://richardcooke.info/en/2014/how-to-migrate-azure-environments/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://richardcooke.info/en/2014/how-to-migrate-azure-environments/&title=How to migrate Azure environments (copy databases &amp; storage accounts)"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://richardcooke.info/en/2014/how-to-migrate-azure-environments/&title=How to migrate Azure environments (copy databases &amp; storage accounts)"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://richardcooke.info/en/2014/how-to-migrate-azure-environments/&title=How to migrate Azure environments (copy databases &amp; storage accounts)"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://richardcooke.info/en/2014/how-to-migrate-azure-environments/&title=How to migrate Azure environments (copy databases &amp; storage accounts)"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://richardcooke.info/en/2014/how-to-migrate-azure-environments/&name=How to migrate Azure environments (copy databases &amp; storage accounts)&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://richardcooke.info/en/2014/how-to-migrate-azure-environments/&t=How to migrate Azure environments (copy databases &amp; storage accounts)"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Export-backup-your-production-database"><span class="toc-number">1.</span> <span class="toc-text">Export (backup) your production database</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Delete-the-database-you-want-to-restore"><span class="toc-number">2.</span> <span class="toc-text">Delete the database you want to restore</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Restore-the-backup-file-to-a-new-database"><span class="toc-number">3.</span> <span class="toc-text">Restore the backup file to a new database</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Finally-ensure-you-name-the-new-database-with-the-same-name-as-the-one-you-deleted"><span class="toc-number">4.</span> <span class="toc-text">Finally, ensure you name the new database with the same name as the one you deleted.</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Copy-your-storage-account"><span class="toc-number">5.</span> <span class="toc-text">Copy your storage account</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        How to migrate Azure environments (copy databases &amp; storage accounts)
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Richard JE Cooke</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2014-10-27T09:58:55.000Z" itemprop="datePublished">2014-10-27</time>
        
      
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/azure/" rel="tag">azure</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>This article demonstrates how to migrate (copy) one Azure database to another and any associated files.  For example, you may want to copy your production database to your test (preproduction) environment to have more recent test data.</p>
<h2 id="Export-backup-your-production-database"><a href="#Export-backup-your-production-database" class="headerlink" title="Export (backup) your production database"></a>Export (backup) your production database</h2><p><img src="/Migrate1.png" alt="Migrate1"><br>You need to save it in a storage account.  Here I use our dev storage account, creating a new container for database-backups. <img src="/Migrate2.png" alt="Migrate2"></p>
<h2 id="Delete-the-database-you-want-to-restore"><a href="#Delete-the-database-you-want-to-restore" class="headerlink" title="Delete the database you want to restore"></a>Delete the database you want to restore</h2><p>Since you cannot overwrite a database in Azure you unfortunately first have to delete the database you want to restore. <img src="/Migrate3.png" alt="Migrate3"></p>
<h2 id="Restore-the-backup-file-to-a-new-database"><a href="#Restore-the-backup-file-to-a-new-database" class="headerlink" title="Restore the backup file to a new database"></a>Restore the backup file to a new database</h2><p>Restore the backup file by creating a new database via import</p>
<p><img src="/Migrate4.png" alt="Migrate4"></p>
<h2 id="Finally-ensure-you-name-the-new-database-with-the-same-name-as-the-one-you-deleted"><a href="#Finally-ensure-you-name-the-new-database-with-the-same-name-as-the-one-you-deleted" class="headerlink" title="Finally, ensure you name the new database with the same name as the one you deleted."></a>Finally, ensure you name the new database with the same name as the one you deleted.</h2><p><img src="/Migrate5.png" alt="Migrate5"></p>
<h2 id="Copy-your-storage-account"><a href="#Copy-your-storage-account" class="headerlink" title="Copy your storage account"></a>Copy your storage account</h2><p>Don’t forget that you might also need to copy all the files from your prod storage account to your test storage account too.  For example, where users upload photos that the database points to. <a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/8582145/copying-storage-data-from-one-azure-account-to-another">Stackoverflow</a> suggests PowerShell &amp; AzCopy, but I found it easiest just to use <a target="_blank" rel="noopener" href="https://cyberduck.io/">CyberDuck</a> and manually copy and paste.</p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">home</a></li>
         
          <li><a href="/archives/">articles</a></li>
         
          <li><a href="/music">music</a></li>
         
          <li><a href="/apps">apps</a></li>
         
          <li><a href="/cv">cv</a></li>
         
          <li><a href="/atom.xml">rss feed</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Export-backup-your-production-database"><span class="toc-number">1.</span> <span class="toc-text">Export (backup) your production database</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Delete-the-database-you-want-to-restore"><span class="toc-number">2.</span> <span class="toc-text">Delete the database you want to restore</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Restore-the-backup-file-to-a-new-database"><span class="toc-number">3.</span> <span class="toc-text">Restore the backup file to a new database</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Finally-ensure-you-name-the-new-database-with-the-same-name-as-the-one-you-deleted"><span class="toc-number">4.</span> <span class="toc-text">Finally, ensure you name the new database with the same name as the one you deleted.</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Copy-your-storage-account"><span class="toc-number">5.</span> <span class="toc-text">Copy your storage account</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://richardcooke.info/en/2014/how-to-migrate-azure-environments/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://richardcooke.info/en/2014/how-to-migrate-azure-environments/&text=How to migrate Azure environments (copy databases &amp; storage accounts)"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://richardcooke.info/en/2014/how-to-migrate-azure-environments/&title=How to migrate Azure environments (copy databases &amp; storage accounts)"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://richardcooke.info/en/2014/how-to-migrate-azure-environments/&is_video=false&description=How to migrate Azure environments (copy databases &amp; storage accounts)"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=How to migrate Azure environments (copy databases &amp; storage accounts)&body=Check out this article: https://richardcooke.info/en/2014/how-to-migrate-azure-environments/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://richardcooke.info/en/2014/how-to-migrate-azure-environments/&title=How to migrate Azure environments (copy databases &amp; storage accounts)"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://richardcooke.info/en/2014/how-to-migrate-azure-environments/&title=How to migrate Azure environments (copy databases &amp; storage accounts)"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://richardcooke.info/en/2014/how-to-migrate-azure-environments/&title=How to migrate Azure environments (copy databases &amp; storage accounts)"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://richardcooke.info/en/2014/how-to-migrate-azure-environments/&title=How to migrate Azure environments (copy databases &amp; storage accounts)"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://richardcooke.info/en/2014/how-to-migrate-azure-environments/&name=How to migrate Azure environments (copy databases &amp; storage accounts)&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://richardcooke.info/en/2014/how-to-migrate-azure-environments/&t=How to migrate Azure environments (copy databases &amp; storage accounts)"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2022 Richard JE Cooke
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">home</a></li><!--
     --><!--
       --><li><a href="/archives/">articles</a></li><!--
     --><!--
       --><li><a href="/music">music</a></li><!--
     --><!--
       --><li><a href="/apps">apps</a></li><!--
     --><!--
       --><li><a href="/cv">cv</a></li><!--
     --><!--
       --><li><a href="/atom.xml">rss feed</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script> 




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script> 
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-56673091-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-56673091-1');
    </script>

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
