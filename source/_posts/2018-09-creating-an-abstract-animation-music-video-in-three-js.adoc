---
title: Creating an abstract animation music video in three.js
date: 2018-09-25 13:16:42
tags:
  - animation
  - music
  - javascript
categories:
  - software
  - music
  - art
---

//asciidoc metadata ------------------------------------------
# An abstract animation music video in three.js
Richard JE Cooke <Richard.JE.Cooke@gmail.com>
v1
:imagesdir: ./2018-09-An-abstract-animation-music-video-in-three-js
:toc: macro
:toclevels: 5
:toc-title: Contents
:sectnums:

// https://asciidoctor.org/docs/user-manual


// table of contents --------------------------------------------
toc::[]

== Introduction
This article describes the inspiration, design, and construction of an abstract animation music video using https://threejs.org/[three.js].
This was done as an assignment for the course Music Technology 2A at UCT.

== The final product
Here's the animated music video I made. Read further to see how it happened.

TODO

== Inspiration
I began my search for ideas by looking for purely abstractly animated music videos.

I knew I didn't want to use illustrations or photographs as I had done that last year for another music video project.
Instead this work would be done manually on computer or programmatically in code.

=== 2D animation

==== Dots

My first inspiration was early abstract animation music videos. The best example of this is Norman McLaren's _Dots_ <<ref_dots>>, shown below:

video::E3-vsKwQ0Cg[youtube, width=700, height=400, theme=dark]

This video has some noteworthy features:

* it is 2D (making it much simpler to create than a 3D animation where physics and camera positioning matter)
* shapes move, scale, and rotate (this is simple to do on computer)
* shapes morph from one shape to another (this may be the same amount of work by hand as scale and rotation, but on a computer it requires much more work to draw two different shapes and tween all the points in between them)
* the animation is synchronised to the beat of the music (this is more work than having a freely moving animation because you have to coordinate visuals and music precisely to the millisecond).

=== 3D animation

==== Sliced
I then looked for 3D abstract animation and found SLICED by dxmiq <<ref_sliced>>:

video::69668299[vimeo, width=700, height=400, theme=dark]

This looks pretty and impressive but I imagine is quite simple to make.
I would simply draw a long line of shapes and then automate the camera to move down the line, with a clipping plane "slicing" the shapes as the camera passes along them.

==== Annihilation
An example of Hollywood level commercial production is the fantastic work by _Milk_ _VFX_ on the film _Annihilation_, created in _Houdini_ <<ref_mandelbulb>>.

video::L6gwu8cOfVk[youtube, width=700, height=400, theme=dark]
This is obviously the ultimate goal for a musical animation, but is possible only with a paid experienced VFX team, and weeks of paid rendering on a server farm.

This video also is the basis for my musical inspiration.
It is synthesized, complex, and vague, but has clear melodic elements and rhythm.

=== Programmatic animation

==== Preflight nerves
I had made an application for _TEDx Cape Town_ a few years ago that pulled tweets from _Twitter_ that were tagged with the conference hashtag and displayed them on a giant projector on the wall.
I thought about something similar for a music video and searched to see if anything like this had been done before. It has, by Brightly for their song _Preflight nerves_ <<ref_tweetvid>>:

video::hMaeY0aP1xQ[youtube, width=700, height=400, theme=dark]
The video above is static, but the one on their http://tweetflight.wearebrightly.com[website] pulls fresh tweets to match the song lyrics in realtime each time you play it.

==== Dennis

I then discovered the most impressive video yet. _Dennis_ is a procedurally generated 3D animated, gesture interactive, beat synchronised music video <<ref_dennis>>:

+++
<iframe src='http://www.dennis.video' width='700px' height='400px'></iframe>
+++

The animation was programmed in https://threejs.org/[three.js].
It is very smooth and quick to render as it uses modern web browsers' support for the graphics processing unit (GPU) by using WebGL.
Finally, the animation was synchronised to the beat of the song by using WebAudio's native analysis capability.

This video shows the power you have when you don't have to animate every shape manually, but can write code to create and manipulate the shapes and camera for you.

== Software tools
After getting some idea of what could be created I began to look for free software tools to work in.

=== 2D animation

==== Synfig Studio

For 2D vector animation the best tool I could find was Synfig Studio <<ref_synfig>>.

image::https://i1.wp.com/www.synfig.org/wp-content/uploads/2018/02/screenshot-07.png[Synfig Studio, 700, 400]

Synfig allows you to draw complex vector shapes directly into the application or import external images.
Each object's properties (e.g. size, rotation, outline, color, etc.) can be independently altered at any point (keyframe) in an animation of any length.
Synfig will then automically fill in (tween) the animation between each keyframe.
It also supports advanced functions like masking layers, blend modes, duplication and time manipuation, and skeleton animation.

Synfig would be the perfect tool to make something simple like _Dots_.

==== two.js

For 2D programmatic animation the best framework I found was https://two.js.org/examples/[two.js] <<ref_twojs>>.

+++
<iframe src='https://two.js.org/examples' width='700px' height='600px'></iframe>
+++

two.js would be best for creating a video like _Dots_ but with much more complexity and movement, or for creating something with text, like _Preflight nerves_.


=== 3D animation

==== Blender & Grease Pencil

https://www.blender.org[Blender] is the undisputed champion of free 3D modelling and animation software.
It has been around for years and its features rival industry standards like _Maya_.

Recently Blender has also added powerful capabilities for beautiful 2D illustrated animations through its _grease pencil_ tool (which used to be a simple way for animators to annotate their work quickly for later use)  <<ref_greasepencil>>.

video::155635261[vimeo, width=700, height=400, theme=dark, start=20]

Plain Blender would be the best tool for making a video like _SLICED_.

Blender with Grease Pencil would be the best tool for making something like _Dots_, but with 3D effects.

The problem is that Blender takes at least a week of learning and practising to become proficient at the basics, and I don't currently have the time or skill for that.

=== Programmatic 3D animation

==== three.js

The best framework I could find for 3D programmatic animation was https://threejs.org[three.js] <<ref_threejs>>.
It was used for the _Dennis_ video above and supports almost anything you could imagine.

+++
<iframe src='https://threejs.org/examples/#webgl_gpgpu_birds' width='700px' height='600px'></iframe>
+++

There is a competitor made by Microsoft, called https://doc.babylonjs.com[Babylon.js], which is more suited to game development as it simplifies commonly used functions like lighting, but three.js is well established.

== Construction

== Critique & conclusion

TODO include pros and cons


// page break
<<<

// bibliography --------------------------------------------
[bibliography]
== References
_All Internet resources were accessed on 25 September 2018._

* [[[ref_dots, 1]]] YouTube - thecipo. Normal McLaren - Dots (1940) [Internet]. 2007. Available from: https://www.youtube.com/watch?v=E3-vsKwQ0Cg.

* [[[ref_sliced, 2]]] Vimeo - dxmiq. SLICED [Internet]. 2013. Available from: https://vimeo.com/69668299.

* [[[ref_mandelbulb, 3]]] vfxblog.com. Mandelbulbs, mutations, and motion capture: the visual effects of Annihilation [Internet interview]. VFXBLOG. 2018. Available from: https://vfxblog.com/2018/03/12/mandelbulbs-mutations-and-motion-capture-the-visual-effects-of-annihilation/.

* [[[ref_tweetvid, 4]]] Medium.com - Charlie Gleason. Making An Interactive Music Video With WebGL [Internet]. 2015. Available from: https://medium.com/superhighfives/making-a-music-video-f60757ceb4cf.

* [[[ref_dennis, 5]]] Brower BM and popcorn_10. Dennis [Internet music video]. n.d. Available from: http://www.dennis.video/#about.

* [[[ref_synfig, 6]]] Synfig.org. Synfig Studio [Internet]. 2018. Available from: https://www.synfig.org.

* [[[ref_twojs, 7]]] Two.js [Internet]. 2018. Available from: https://two.js.org/examples.

* [[[ref_greasepencil, 8]]] Blender 2.79 manual. User Interface » Grease Pencil » Introduction [Internet]. 2018. Available from: https://docs.blender.org/manual/ko/dev/interface/grease_pencil/introduction.html.

* [[[ref_threejs, 9]]] Three.js [Internet]. 2018. Available from: https://threejs.org.
