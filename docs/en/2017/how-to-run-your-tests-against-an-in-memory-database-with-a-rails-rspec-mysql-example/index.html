<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="Are your tests too slow because each one recreates the database?  Run them all in memory to make them rapid.  This will work for any database and programming language. My example here uses MySql, Ruby">
<meta property="og:type" content="article">
<meta property="og:title" content="How to run your tests against an in-memory database (with a Rails Rspec MySql example)">
<meta property="og:url" content="https://richardcooke.info/en/2017/how-to-run-your-tests-against-an-in-memory-database-with-a-rails-rspec-mysql-example/index.html">
<meta property="og:site_name" content="Richard JE Cooke">
<meta property="og:description" content="Are your tests too slow because each one recreates the database?  Run them all in memory to make them rapid.  This will work for any database and programming language. My example here uses MySql, Ruby">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://richardcooke.info/before_test.gif">
<meta property="og:image" content="https://richardcooke.info/after_test.gif">
<meta property="article:published_time" content="2017-01-17T09:29:02.000Z">
<meta property="article:modified_time" content="2022-05-27T17:09:22.312Z">
<meta property="article:author" content="Richard JE Cooke">
<meta property="article:tag" content="testing">
<meta property="article:tag" content="mysql">
<meta property="article:tag" content="rails">
<meta property="article:tag" content="rAM">
<meta property="article:tag" content="rspec">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://richardcooke.info/before_test.gif">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>How to run your tests against an in-memory database (with a Rails Rspec MySql example)</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 6.2.0"><link rel="alternate" href="/atom.xml" title="Richard JE Cooke" type="application/atom+xml">
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">home</a></li><!--
     --><!--
       --><li><a href="/archives/">articles</a></li><!--
     --><!--
       --><li><a href="/music">music</a></li><!--
     --><!--
       --><li><a href="/apps">apps</a></li><!--
     --><!--
       --><li><a href="/cv">cv</a></li><!--
     --><!--
       --><li><a href="/atom.xml">rss feed</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/en/2017/how-to-choose-a-wordpress-theme-avada-enfold-x-jupiter-divi-beaver-builder-genesis/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/en/2017/how-to-post-cron-job-results-or-any-other-script-to-slack/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://richardcooke.info/en/2017/how-to-run-your-tests-against-an-in-memory-database-with-a-rails-rspec-mysql-example/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://richardcooke.info/en/2017/how-to-run-your-tests-against-an-in-memory-database-with-a-rails-rspec-mysql-example/&text=How to run your tests against an in-memory database (with a Rails Rspec MySql example)"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://richardcooke.info/en/2017/how-to-run-your-tests-against-an-in-memory-database-with-a-rails-rspec-mysql-example/&title=How to run your tests against an in-memory database (with a Rails Rspec MySql example)"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://richardcooke.info/en/2017/how-to-run-your-tests-against-an-in-memory-database-with-a-rails-rspec-mysql-example/&is_video=false&description=How to run your tests against an in-memory database (with a Rails Rspec MySql example)"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=How to run your tests against an in-memory database (with a Rails Rspec MySql example)&body=Check out this article: https://richardcooke.info/en/2017/how-to-run-your-tests-against-an-in-memory-database-with-a-rails-rspec-mysql-example/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://richardcooke.info/en/2017/how-to-run-your-tests-against-an-in-memory-database-with-a-rails-rspec-mysql-example/&title=How to run your tests against an in-memory database (with a Rails Rspec MySql example)"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://richardcooke.info/en/2017/how-to-run-your-tests-against-an-in-memory-database-with-a-rails-rspec-mysql-example/&title=How to run your tests against an in-memory database (with a Rails Rspec MySql example)"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://richardcooke.info/en/2017/how-to-run-your-tests-against-an-in-memory-database-with-a-rails-rspec-mysql-example/&title=How to run your tests against an in-memory database (with a Rails Rspec MySql example)"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://richardcooke.info/en/2017/how-to-run-your-tests-against-an-in-memory-database-with-a-rails-rspec-mysql-example/&title=How to run your tests against an in-memory database (with a Rails Rspec MySql example)"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://richardcooke.info/en/2017/how-to-run-your-tests-against-an-in-memory-database-with-a-rails-rspec-mysql-example/&name=How to run your tests against an in-memory database (with a Rails Rspec MySql example)&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://richardcooke.info/en/2017/how-to-run-your-tests-against-an-in-memory-database-with-a-rails-rspec-mysql-example/&t=How to run your tests against an in-memory database (with a Rails Rspec MySql example)"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#How-to"><span class="toc-number">1.</span> <span class="toc-text">How to</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Apple"><span class="toc-number">2.</span> <span class="toc-text">Apple</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Update-a-much-easier-way"><span class="toc-number">3.</span> <span class="toc-text">Update (a much easier way)</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        How to run your tests against an in-memory database (with a Rails Rspec MySql example)
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Richard JE Cooke</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2017-01-17T09:29:02.000Z" itemprop="datePublished">2017-01-17</time>
        
      
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/mysql/" rel="tag">mysql</a>, <a class="tag-link-link" href="/tags/rAM/" rel="tag">rAM</a>, <a class="tag-link-link" href="/tags/rails/" rel="tag">rails</a>, <a class="tag-link-link" href="/tags/rspec/" rel="tag">rspec</a>, <a class="tag-link-link" href="/tags/testing/" rel="tag">testing</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>Are your tests too slow because each one recreates the database?  Run them all in memory to make them rapid.  This will work for any database and programming language.</p>
<p>My example here uses MySql, Ruby on Rails, and Rspec. Here’s how fast my tests ran before: <img src="/before_test.gif" alt="before_test"></p>
<p>And after:</p>
<p><img src="/after_test.gif"></p>
<h2 id="How-to"><a href="#How-to" class="headerlink" title="How to"></a>How to</h2><p>(I use docker because I assume you already have a local database that you don’t want to move entirely into memory, but if you don’t have one already then you don’t need docker - just install MySql locally into your tmpfs.) Install docker-compose if you don’t have it:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo -i</span><br><span class="line">curl -L https://github.com/docker/compose/releases/download/1.9.0/docker-compose-`<span class="built_in">uname</span> -s`-`<span class="built_in">uname</span> -m` &gt; /usr/local/bin/docker-compose &amp;&amp;</span><br><span class="line"><span class="built_in">chmod</span> +x /usr/local/bin/docker-compose</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>

<p>Now create a docker-compose.yml file for your test database (I put mine in script&#x2F;test&#x2F;test.sh).</p>
<p>Note that it uses your pc’s &#x2F;dev&#x2F;shm folder, which is entirely in RAM:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;2&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">db:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mysql</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">MYSQL_ROOT_PASSWORD:</span> <span class="string">example</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/dev/shm/mysql:/var/lib/mysql</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">33006</span><span class="string">:3306</span></span><br></pre></td></tr></table></figure>

<p>Set your test database connection in your config&#x2F;database.yml file:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">test:</span> <span class="meta">&amp;test</span></span><br><span class="line">  <span class="attr">adapter:</span> <span class="string">mysql2</span></span><br><span class="line">  <span class="attr">host:</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line">  <span class="attr">database:</span> <span class="string">rc_test</span></span><br><span class="line">  <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">  <span class="attr">password:</span> <span class="string">example</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">33006</span></span><br></pre></td></tr></table></figure>

<p>And finally create &#x2F;script&#x2F;test&#x2F;test.sh to run everything:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">clear</span><br><span class="line"><span class="built_in">set</span> -e <span class="comment"># any commands which fail will cause the shell script to exit immediately</span></span><br><span class="line"><span class="built_in">set</span> -x <span class="comment"># echo off (-x for echo on)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#----------------------</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Run this command from the project root folder (./script/test/test.sh)&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;(Before running this for the first time run: cd script/test &amp;&amp; docker-compose up)&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="built_in">cd</span> script/test</span><br><span class="line"><span class="built_in">mkdir</span> -p /dev/shm/mysql <span class="comment"># /dev/shm is a RAM folder (tmpfs)</span></span><br><span class="line">docker-compose up -d <span class="comment">#detached</span></span><br><span class="line"><span class="built_in">sleep</span> 2 <span class="comment">#wait for containers to start</span></span><br><span class="line"><span class="built_in">cd</span> ../..</span><br><span class="line">mysql -h 0.0.0.0 -P 33006 -u root -pexample -e <span class="string">&quot;DROP DATABASE IF EXISTS rental_connect_test;&quot;</span></span><br><span class="line">mysql -h 0.0.0.0 -P 33006 -u root -pexample -e <span class="string">&quot;CREATE DATABASE rental_connect_test;&quot;</span></span><br><span class="line">RAILS_ENV=<span class="built_in">test</span> bundle <span class="built_in">exec</span> rake db:migrate</span><br><span class="line">bundle <span class="built_in">exec</span> rspec</span><br><span class="line"><span class="built_in">cd</span> script/test</span><br><span class="line">docker-compose stop</span><br><span class="line"><span class="built_in">cd</span> ../..</span><br></pre></td></tr></table></figure>

<p>Now run your tests by typing <code>./script/test/test.sh</code>.</p>
<h2 id="Apple"><a href="#Apple" class="headerlink" title="Apple"></a>Apple</h2><p>The above works on Ubuntu. For OSX you’ll first have to create your own RAM disk in place of &#x2F;dev&#x2F;shm:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hdiutil attach -nomount ram://$((<span class="number">2</span> * <span class="number">1024</span> * <span class="number">500</span>))</span><br><span class="line">diskutil eraseVolume HFS+ RAMDisk /dev/disk2</span><br></pre></td></tr></table></figure>

<p>Alternatively you can use a database inside a Docker container (because that container has its own RAM disk folder already). Then whenever you start that container, you’d run this script inside it to move the MySql data folder into RAM:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">start_mysql.sh</span><br><span class="line">/etc/init.d/mysql start &amp;&amp;</span><br><span class="line">/etc/init.d/mysql stop &amp;&amp;</span><br><span class="line"><span class="built_in">cp</span> -R -p /var/lib/mysql /dev/shm &amp;&amp;</span><br><span class="line">sed -i -e s,/var/lib/mysql,/dev/shm/mysql,g /etc/mysql/my.cnf &amp;&amp;</span><br><span class="line">/etc/init.d/mysql start</span><br></pre></td></tr></table></figure>

<p>(Remember this has to run every time you start the container because RAM disappears after you turn off a computer)</p>
<h2 id="Update-a-much-easier-way"><a href="#Update-a-much-easier-way" class="headerlink" title="Update (a much easier way)"></a>Update (a much easier way)</h2><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/42226418/how-to-move-postresql-to-ram-disk-in-docker">StackOverflow</a> has given me a much easier way than the above. Docker takes a –tmpfs flag that mounts a memory folder for you. Here’s an example for Postgresql:</p>
<p><code>docker run -d --tmpfs=/pgtmpfs -p 6000:5432 -e PGDATA=/pgtmpfs postgres:9.6</code></p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">home</a></li>
         
          <li><a href="/archives/">articles</a></li>
         
          <li><a href="/music">music</a></li>
         
          <li><a href="/apps">apps</a></li>
         
          <li><a href="/cv">cv</a></li>
         
          <li><a href="/atom.xml">rss feed</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#How-to"><span class="toc-number">1.</span> <span class="toc-text">How to</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Apple"><span class="toc-number">2.</span> <span class="toc-text">Apple</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Update-a-much-easier-way"><span class="toc-number">3.</span> <span class="toc-text">Update (a much easier way)</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://richardcooke.info/en/2017/how-to-run-your-tests-against-an-in-memory-database-with-a-rails-rspec-mysql-example/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://richardcooke.info/en/2017/how-to-run-your-tests-against-an-in-memory-database-with-a-rails-rspec-mysql-example/&text=How to run your tests against an in-memory database (with a Rails Rspec MySql example)"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://richardcooke.info/en/2017/how-to-run-your-tests-against-an-in-memory-database-with-a-rails-rspec-mysql-example/&title=How to run your tests against an in-memory database (with a Rails Rspec MySql example)"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://richardcooke.info/en/2017/how-to-run-your-tests-against-an-in-memory-database-with-a-rails-rspec-mysql-example/&is_video=false&description=How to run your tests against an in-memory database (with a Rails Rspec MySql example)"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=How to run your tests against an in-memory database (with a Rails Rspec MySql example)&body=Check out this article: https://richardcooke.info/en/2017/how-to-run-your-tests-against-an-in-memory-database-with-a-rails-rspec-mysql-example/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://richardcooke.info/en/2017/how-to-run-your-tests-against-an-in-memory-database-with-a-rails-rspec-mysql-example/&title=How to run your tests against an in-memory database (with a Rails Rspec MySql example)"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://richardcooke.info/en/2017/how-to-run-your-tests-against-an-in-memory-database-with-a-rails-rspec-mysql-example/&title=How to run your tests against an in-memory database (with a Rails Rspec MySql example)"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://richardcooke.info/en/2017/how-to-run-your-tests-against-an-in-memory-database-with-a-rails-rspec-mysql-example/&title=How to run your tests against an in-memory database (with a Rails Rspec MySql example)"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://richardcooke.info/en/2017/how-to-run-your-tests-against-an-in-memory-database-with-a-rails-rspec-mysql-example/&title=How to run your tests against an in-memory database (with a Rails Rspec MySql example)"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://richardcooke.info/en/2017/how-to-run-your-tests-against-an-in-memory-database-with-a-rails-rspec-mysql-example/&name=How to run your tests against an in-memory database (with a Rails Rspec MySql example)&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://richardcooke.info/en/2017/how-to-run-your-tests-against-an-in-memory-database-with-a-rails-rspec-mysql-example/&t=How to run your tests against an in-memory database (with a Rails Rspec MySql example)"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2022 Richard JE Cooke
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">home</a></li><!--
     --><!--
       --><li><a href="/archives/">articles</a></li><!--
     --><!--
       --><li><a href="/music">music</a></li><!--
     --><!--
       --><li><a href="/apps">apps</a></li><!--
     --><!--
       --><li><a href="/cv">cv</a></li><!--
     --><!--
       --><li><a href="/atom.xml">rss feed</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script> 




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script> 
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-56673091-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-56673091-1');
    </script>

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
