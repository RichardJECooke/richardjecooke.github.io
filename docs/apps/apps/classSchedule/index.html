<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Class schedule maker (genetic programming)</title>
    <meta name="description" content="Class schedule maker (genetic programming)">
    <meta name="author" content="Richard JE Cooke">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class'
        }
    </script>
</head>

<body class="bg-slate-900 text-slate-300">
    <div class="flex m-5">
        <!-- <div class="w-4/5 m-5 grid grid-cols-5 grid-rows-6 gap-1 divide-x divide-y border border-slate-700 grid-flow-row"> -->
        <div class="w-4/5 m-5 ">
            <table class="w-full table-auto border border-slate-800">
                <thead class="mb-2 text-lg">
                    <th class=" m-2">Monday</th>
                    <th class=" m-2">Tuesday</th>
                    <th class=" m-2">Wednesday</th>
                    <th class=" m-2">Thursday</th>
                    <th class=" m-2">Friday</th>
                </thead>
                <tbody class="text-xs">
                </tbody>
            </table>
        </div>
        <div class="w-1/5 m-5 items-center flex flex-col justify-start">
            <div class="text-4xl mt-3 text-slate-500">
                Score
            </div>
            <div class="text-4xl mt-2.5">
                23
            </div>
        </div>
    </div>
</body>

<script lang="js">
generateTableRows();
setInterval(swapCell, 2000);

function generateTableRows() {
    const tbody = document.querySelector('tbody');
    for (let row = 1; row <= 8; row++) {
        const tr = document.createElement('tr');
        for (let col = 0; col < 5; col++) {
            const td = document.createElement('td');
            const div = document.createElement('div');
            div.className = "bg-slate-800 m-1 p-1 opacity-0 transition-opacity duration-500";
            div.textContent = Math.floor(Math.random()*10000000000);
            td.appendChild(div);
            tr.appendChild(td);
            setTimeout(() => { div.classList.remove('opacity-0'); }, 2000 * Math.random());
        }
        tbody.appendChild(tr);
    }
}

function swapCell() {
    const cells = document.querySelectorAll('tbody td');
    let index1 = Math.floor(Math.random() * cells.length);
    let index2;
    do {
        index2 = Math.floor(Math.random() * cells.length);
    } while (index1 === index2);
    const cell1 = cells[index1];
    const cell2 = cells[index2];
    const rect1 = cell1.getBoundingClientRect();
    const rect2 = cell2.getBoundingClientRect();
    const translateX1 = rect2.left - rect1.left;
    const translateY1 = rect2.top - rect1.top;
    const translateX2 = rect1.left - rect2.left;
    const translateY2 = rect1.top - rect2.top;
    cell1.style.transition = 'transform 1000ms';
    cell2.style.transition = 'transform 1000ms';
    cell1.style.transform = `translate(${translateX1}px, ${translateY1}px)`;
    cell2.style.transform = `translate(${translateX2}px, ${translateY2}px)`;
    setTimeout(() => { // swap the cells after animation has finished and remove the transform
        cell1.style.transition = '';
        cell2.style.transition = '';
        cell1.style.transform = '';
        cell2.style.transform = '';
        const cell1Clone = cell1.cloneNode(true);
        const cell2Clone = cell2.cloneNode(true);
        cell1.parentNode.insertBefore(cell2Clone, cell1);
        cell2.parentNode.insertBefore(cell1Clone, cell2);
        cell1.parentNode.removeChild(cell1);
        cell2.parentNode.removeChild(cell2);
    }, 1000);
}
</script>
</html>
