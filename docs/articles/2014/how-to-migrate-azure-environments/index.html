<!DOCTYPE html>
<html lang=en>
<head>
	<title>Richard JE Cooke</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="HandheldFriendly" content="True">
	<meta name="viewport" content="width=device-width, initial-scale=1"> <!-- make page size responsive -->

	<link rel="shortcut icon" href="/_media/img/logo.png">
	<!-- Fonts -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Comfortaa&family=Mulish&family=Ubuntu+Mono&display=swap" rel="stylesheet">

	<!-- CSS -->
	<link rel="stylesheet" href="/_media/css/main.css">
	<link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">

	<!--
	TODO
	<meta name="description" content="Contents  1. Introduction 2. The final product 3. CSound &amp;amp; Cabbage 4. Pure Data      1. Introduction   This article describes the creation of a prepared piano created digitally and performed in">
	<meta name="keywords" content="pure data,music">
	<meta property="og:type" content="article">
	<meta property="og:title" content="A prepared digital piano in Pure Data">
	<meta property="og:url" content="https://richardcooke.info/en/2019/prepared-digital-piano-in-pure-data/index.html">
	<meta property="og:site_name" content="Richard JE Cooke">
	<meta property="og:description" content="Contents  1. Introduction 2. The final product 3. CSound &amp;amp; Cabbage 4. Pure Data      1. Introduction   This article describes the creation of a prepared piano created digitally and performed in">
	<meta property="og:locale" content="en">
	<meta property="og:image" content="https://richardcooke.info/en/2019/prepared-digital-piano-in-pure-data/1.png">
	<meta property="og:updated_time" content="2019-06-19T13:33:55.888Z">
	<meta name="twitter:card" content="summary">
	<meta name="twitter:title" content="A prepared digital piano in Pure Data">
	<meta name="twitter:description" content="Contents  1. Introduction 2. The final product 3. CSound &amp;amp; Cabbage 4. Pure Data      1. Introduction   This article describes the creation of a prepared piano created digitally and performed in">
	<meta name="twitter:image" content="https://richardcooke.info/en/2019/prepared-digital-piano-in-pure-data/1.png">
	-->

	<!-- rss -->
	<!-- TODO -->

</head>
<!-- avoid flash of unstyled content -->
<body onload="document.body.style.visibility=`visible`;">
<script>document.body.style.visibility=`hidden`;</script><div class="vspacer"></div>
<div class="border_bottom shadow">
	<div class="center_children">
		<div class="gutters ">
			<div>
				<a href="/" class="no_link_styling title_container">
					<img src="/_media/img/logo.png" width="40rem" height="40rem"  class="white_image"></img>
					<h1 class="title">Richard JE Cooke</h1>
				</a>
			</div>
			<div class="flex">
				<div class="hspacer">
					<a href="/articles">Articles</a>
				</div>
				<div class="hspacer">
					<a href="/apps">Apps</a>
				</div>
				<div class="hspacer">
					<a href="/music">Music</a>
				</div>
				<div class="hspacer">
					<a href="/cv">C.V.</a>
				</div>
				<div>
					<a href="/atom.xml">RSS</a>
				</div>
			</div>
		</div>
	</div>
	<div class="vspacer"></div>
</div>
<div class="vspacer"></div>
<div class="full_column post_container">
	<h2 class="post_title">How to migrate Azure environments (copy databases & storage accounts)</h2>
	<span class="post_date">27 October 2014</span>
	<p>This article demonstrates how to migrate (copy) one Azure database to another and any associated files.  For example, you may want to copy your production database to your test (preproduction) environment to have more recent test data.</p>
<h2>Export (backup) your production database</h2>
<p><img src="Migrate1.png" alt="Migrate1">
You need to save it in a storage account.  Here I use our dev storage account, creating a new container for database-backups. <img src="Migrate2.png" alt="Migrate2"></p>
<h2>Delete the database you want to restore</h2>
<p>Since you cannot overwrite a database in Azure you unfortunately first have to delete the database you want to restore. <img src="Migrate3.png" alt="Migrate3"></p>
<h2>Restore the backup file to a new database</h2>
<p>Restore the backup file by creating a new database via import</p>
<p><img src="Migrate4.png" alt="Migrate4"></p>
<h2>Finally, ensure you name the new database with the same name as the one you deleted.</h2>
<p><img src="Migrate5.png" alt="Migrate5"></p>
<h2>Copy your storage account</h2>
<p>Don't forget that you might also need to copy all the files from your prod storage account to your test storage account too.  For example, where users upload photos that the database points to. <a href="http://stackoverflow.com/questions/8582145/copying-storage-data-from-one-azure-account-to-another">Stackoverflow</a> suggests PowerShell &amp; AzCopy, but I found it easiest just to use <a href="https://cyberduck.io/">CyberDuck</a> and manually copy and paste.</p>

</div>
<div class="vspacer"></div>
<div class="vspacer"></div>
</body>
</html>